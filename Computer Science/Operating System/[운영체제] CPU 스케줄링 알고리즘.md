# 3.4 CPU 스케줄링 알고리즘

## **개요** 
  운영체제는 실행할 준비가 된 프로세스들이 적절히 CPU를 배정받아 효율적으로 작업을 처리할 수 있도록 관리해야 하고,<br>이를 위해서 다양한 스케줄링 알고리즘을 활용합니다.<br> 또한 스케줄링 알고리즘의 성능 평가 기준과 함께 여러 가지 스케줄링 기법에 대하여 살펴봅니다.
## **핵심용어**
- 비선점형 방식 : 비선점형 방식은 프로세스가 스스로 CPU 소유권을 포기하는 방식이며, 강제로 프로세스를 중지하지 않습니다.
- 섬전형 방식  : 현대 운영체제가 쓰는 방식으로 지금 사용하고 있는 프로세스를 알고리즘에 의해 중단시키고 버리고 강제로 다른 프로세스에 CPU 소유권을 할당하는 방식을 말합니다.
<!-- /TOC -->
## **목차**
  - [CPU 스케줄링 알고리즘](#34-cpu-스케줄링-알고리즘)
  - [개요](#개요)
  - [핵심용어](#핵심용어)
  - [목차](#목차)
  - [CPU 스케줄러란?](#cpu-스케줄러란?)
  - [비선점형 방식](#비선점형-방식)
    - [FCFS](#FCFS(Frist-Come,-First-Served)-Scheduling)
    - [SJF](#SJF(Shortest-Job-First)-Scheduling)
    - [우선순위](#우선순위)
  - [선점형 방식](#선점형-방식)
    - [라운드 로빈](#RR-(Round-Robin)-Scheduling)
    - [SRF](#SRF(Shortest-Remaining-Time-First))
    - [다단계 큐](#다단계-큐)


## CPU 스케줄러란?

  CPU 스케줄링 알고리즘에 따라 프로세스에서 해야 하는 일을 스레드 단위로 CPU 에 할당합니다.
  
  ![image](https://github.com/ukukdin/basic-computer-science/assets/97656198/cbe59353-b5f5-40c4-b195-49287bb5dde4)

  프로그램이 실행 될 때 CPU 스케줄링 알고리즘이 어떤 프로그램에 CPU 소유권을 줄것인지 결정합니다. 이 알고리즘은 CPU 이용률을 높게 즉 주어진 시간에 많은 일을 하게 준비 큐(ready Queue) 에 있는 프로세스는 적게 그리고 응답 시간은 짧게 설정하는 것을 목표로 합니다.

위 그림과 같이 스케줄링 알고리즘은  크게 둘로 분류할 수 있습니다.

## 비선점형 방식
- 설명 : 비선점형 방식은 프로세스가 스스로 CPU 소유권을 포기하는 방식입니다, 또한 강제로 프로세스를 중지 하지 않습니다.
- 장점 : 컨텍스트 스위칭으로 인한 부하가 적습니다, 즉 추가적인 오버헤드가 발생하지 않습니다.
- 단점 : 프로세스 우선순위에 대한 고려가 없습니다.
- 알고리즘 
  -  FCFS(Frist Come, First Served) Scheduling
      - 가장 간단하고 직관적인 스케쥴링 알고리즘으로 그 구조가 Queue와 비슷합니다.
      - 먼저 도착한 프로세스를 먼저 실행하고, 그후에 도착한  프로세스는 순서대로 CPU를 할당합니다.
      - 보편적으로 프로세스들의 평균 대기 시간이 길어진다는 문제가 있습니다.
  - SJF(Shortest Job First) Scheduling
      - 다음에 실행할 프로세스를 선택할 때 실행 시간이 가장 짧을 것으로 예상되는 프로세스를 선택하는 방식입니다.
      - ready queue에 프로세스를 새로 삽입할 때 CPU burst time이 가장 짧은 것을 다음 프로세스로 지정할 수 있도록 제일 앞에 삽입합니다.
      - 이 경우 FCFS보다 평균 대기 시간이 줄어들지만 CPU burst time이 긴 프로세스의 경우 오히려 대기시간이 증가하고 심할 경우 starvation 상태가 되는 문제점이 생깁니다.
      - 비선점형 방식뿐만 아니라 선점형 방식으로 이용되기도 합니다.
  - 우선순위
     - 기존 SJF 스케줄링의 경우 긴 시간을 가진 프로세스가 실행되지 않는 현상이 발생하는데, 이때 우선순위는 이 단점을 오래된 작업일수록 '우선순위'를 높이는 방법(align)을 사용해 보완한 알고리즘입니다.<br>참고로 우선순위는 앞서 설명한 SJF와 우선순위를 말하는 것 뿐만 아니라 FCFS를 활용하여 만들기도 하며 선점형, 비선점형적인 우선순위 스케줄링 알고리즘을 말하기도 합니다.
       
## 선점형 방식
- 설명 : 선점형 방식은 현대 운영체제가 쓰는 방식으로 지금 사용하고 있는 프로세스를 알고리즘에 의대 중단시켜 버리고 강제로 다른 프로세스에 CPU 소유권을 할당하는 방식입니다.
- 장점 : 프로세스에 대한 우선순위를 고려합니다. 
- 단점 : 컨테스트 스위칭이 일정 시간마다 일어나기 때문에 오버헤드가 발생합니다.
- 알고리즘 
  - RR (Round-Robin) Scheduling
      - 각 프로세스에 차례로 일정한 시간 할당량(time quantum) 동안 CPU 자원을 차지할 수 있도록 합니다.
      - time quantum 시간이 길다면 FCFS와 같은 형태로 작동하므로 RR 스케줄링을 사용하는 의미가 줄어들고, 시간이 너무 짧다면 너무 많은 Overhead가 생기기 때문에 좋지 않습니다.
      - 즉 비용이 커집니다. 일반적으로 전체 작업 시간은 길어지지만 평균 응답 시간은 짧아진다고합니다.
      - 따라서 적절한 time quantum 길이를 찾는 것이 중요합니다.
      - 또한 이 알고리즘은 로드 발랜서에서 트래픽 분산 알고리즘으로도 쓰입니다.
  - SRF(Shortest Remaining Time First)
    - 중간에 실행 시간이 더 짧은 작업이 들어오면 수행하던 프로세스를 중지하고 해당 프로세스를 수행하는 알고리즘입니다.
  - 다단계 큐
    - 다단계 큐는 우선순위에 따른 준비 큐를 여러개 사용하고, 큐마다 라운드 로빈이나 FCFS등 다른 스케줄링 알고리즘을 적용한 것을 말합니다.<br> 큐 간의 프로세스 이동이 안되므로 스케줄링 부담이 적지만 유연성이 떨어지는 특징이 있습니다. 


 ![image](https://github.com/ukukdin/basic_CS_study/assets/97656198/84637fac-ff2b-4f1e-a704-da14534a97e3)
